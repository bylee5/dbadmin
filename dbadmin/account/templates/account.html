<!DOCTYPE html>
{% extends 'base-account.html' %}
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    {% block content %}
	<!-- 검색/입력 span -->
	<span style="font-size: 12px;" type="button" class="badge badge-primary" data-toggle="collapse" data-target="#collapseSelect" aria-controls="collapseSelect">검색</span>
	<span style="font-size: 12px;" type="button" class="badge badge-danger" data-toggle="collapse" data-target="#collapseInsert" aria-controls="collapseInsert">입력</span>
	<span style="font-size: 12px;" type="button" class="badge badge-info" data-toggle="collapse" data-target="#collapseUpdateMulti" aria-controls="collapseUpdateMulti">다중 수정/삭제(테스트, 미구현)</span>

	<!-- 로딩바 -->
	<div class="spinner-border spinner-border-sm text-dark" role="status" id="spinners" name="spinners">
		<span class="sr-only">Loading...</span>
	</div>

   	<!--
	<span style="font-size: 12px;" type="button" class="badge badge-dark" onclick="multi_updateBox()">다중 수정(테스트)</span>
	<span style="font-size: 12px;" type="button" class="badge badge-info" onclick="multi_deleteBox()">다중 삭제(테스트)</span>
	<script>
		function multi_deleteBox() {
			alert("다중 삭제 테스트 메시지");
		}

		function multi_updateBox() {
			alert("다중 수정 테스트 메시지");
			//alert($('.check').val());
		}
	</script>
	-->

    <!-- 검색란 -->
    <div class="collapse" id="collapseSelect" style="font-size: 12px;">
		<div class="card card-body mt-2 bg-light callout callout-primary">
			<h6>검색란</h6>
			<p>기본적으로 like 검색을 제공하고 있습니다.</p>

			<table class="1table table-sm text-center" style="table-layout: fixed">
				<tr class="bg-dark text-white">
					<th class="rounded-left">요청자명</th>
					<th class="">요청팀</th>
					<th class="">서버</th>
					<th class="">아이디</th>
					<th class="">허용 호스트</th>
					<th class="">권한</th>
					<th class="">DB</th>
					<th class="">TABLE</th>
					<th class="">URL</th>
					<th class="rounded-right"></th>
				</tr>
				<tr>
					<form class="form-inline" onsubmit="return false" name="selectForm">
						{% csrf_token %}
						<td class="">
							<input class="form-control form-control-sm" id="s_account_requestor" name="s_account_requestor" value="{{ account_requestor }}" type="text" placeholder="">
						</td>
						<td class="">
							<input class="form-control form-control-sm" id="s_account_devteam" name="s_account_devteam" value="{{ account_devteam }}" type="text" placeholder="">
						</td>
						<td class="">
							<div class="input-group input-group-sm">
								<select class="custom-select" id="s_account_svr" name="s_account_svr">
									<option value="">All</option>
									{% if account_svr_list %}
									{% for account_svr_lists in account_svr_list %}
									<option {% if account_svr == account_svr_lists.account_svr %} selected {% endif %} value="{{ account_svr_lists.account_svr }}">{{ account_svr_lists.account_svr }}</option>
									{% endfor %}
									{% endif %}
								</select>
							</div>
						</td>
						<td class="">
							<input class="form-control form-control-sm" id="s_account_user" name="s_account_user" value="{{ account_user }}" type="text" placeholder="">
						</td>
						<td class="">
							<input class="form-control form-control-sm" id="s_account_host" name="s_account_host" value="{{ account_host }}" type="text" placeholder="">
						</td>
						<td class="">
							<input class="form-control form-control-sm" id="s_account_grant" name="s_account_grant" value="{{ account_grant }}" type="text" placeholder="">
						</td>
						<td class="">
							<input class="form-control form-control-sm" id="s_account_db" name="s_account_db" value="{{ account_db }}" type="text" placeholder="">
						</td>
						<td class="">
							<input class="form-control form-control-sm" id="s_account_table" name="s_account_table" value="{{ account_table }}" type="text" placeholder="">
						</td>
						<td class="">
							<input class="form-control form-control-sm" id="s_account_url" name="s_account_url" value="{{ account_url }}" type="text" placeholder="">
						</td>
						<td class="">
							<button id="search" class="btn btn-outline-primary btn-sm">검색</button>
						</td>
					</form>
				</tr>
			</table>
		</div>
    </div>

	<!-- 입력란 -->
	<div class="collapse small" id="collapseInsert" style="1font-size: 12px;">
		<div class="card card-body mt-2 bg-light callout callout-danger">
			<h6>입력란</h6>
			<a>권한 직접입력을 할 경우에는, 반드시 ,를 잘 사용해주세요.
				(예시 : select, insert, update, execute)</a>
			<a class="mb-2">허용 호스트 입력 시, ','를 기재하면 여러대역대 계정을 생성 할 수 있습니다.
				(예시 : 10.11.11.%, 10.11.12.%, 10.11.13.%)</a>

			<table class="table table-sm text-center" style="table-layout: fixed">
				<form class="form-inline" onsubmit="return false;" name="insertForm">
				{% csrf_token %}
				<tr class="">
					<td style="width: 5%" class="bg-dark text-white align-middle">요청자명</td>
					<td style="width: 9%"><input class="form-control form-control-sm" id="i_account_requestor" name="i_account_requestor" value="{{ i_account_requestor }}" type="text"></td>
					<td style="width: 5%" class="bg-dark text-white align-middle">요청팀</td>
					<td style="width: 9%"><input class="form-control form-control-sm" id="i_account_devteam" name="i_account_devteam" value="{{ i_account_devteam }}" type="text"></td>
					<td style="width: 5%" class="bg-dark text-white align-middle">서버</td>
					<td style="width: 9%"><input class="form-control form-control-sm" id="i_account_svr" name="i_account_svr" value="{{ i_account_svr }}" type="text"></td>
					<td style="width: 5%" class="bg-dark text-white align-middle">아이디</td>
					<td style="width: 9%"><input class="form-control form-control-sm" id="i_account_user" name="i_account_user" value="{{ i_account_user }}" type="text"></td>
					<td style="width: 5%" class="bg-dark text-white align-middle">허용 호스트</td>
					<td colspan="2" style="width: 18%"><input class="form-control form-control-sm" id="i_account_host" name="i_account_host" value="{{ i_account_host }}" type="text"></td>
					<td style="width: 5%" class="bg-dark text-white align-middle">패스워드</td>
					<td style="width: 8%"><input class="form-control form-control-sm" id="i_account_pass" name="i_account_pass" value="{{ i_account_pass }}" type="text"></td>
				</tr>
				<tr class="">
					<td class="bg-dark text-white align-middle">INFO</td>
					<td><input class="form-control form-control-sm" id="i_account_info" name="i_account_info" value="{{ i_account_info }}" type="text"></td>
					<td class="bg-dark text-white align-middle">URL</td>
					<td><input class="form-control form-control-sm" id="i_account_url" name="i_account_url" value="{{ i_account_url }}" type="text"></td>
					<td class="bg-dark text-white align-middle">DB</td>
					<td><input class="form-control form-control-sm" id="i_account_db" name="i_account_db" value="{{ i_account_db }}" type="text"></td>
					<td class="bg-dark text-white align-middle">TABLE</td>
					<td><input class="form-control form-control-sm" id="i_account_table" name="i_account_table" value="{{ i_account_table }}" type="text"></td>
					<td class="bg-dark text-white align-middle">권한</td>
					<td colspan="4">
						<div class="input-group input-group-sm">
							<select class="custom-select" id="i_account_grant" name="i_account_grant">
								<option value="select" selected>select</option>
								<option value="select, insert, update, delete">select, insert, update, delete</option>
								<option value="select, insert, update, delete, alter, drop, create">select, insert, update, delete, alter, drop, create</option>
								<option value="">직접 입력</option>
							</select>
							<input class="form-control form-control-sm" id="i_account_grant_direct" name="i_account_grant_direct" value="{{ i_account_grant_direct }}" type="text">

								<!-- input grant 직접입력 구현 -->
								<script>
								$('#i_account_grant').load('dummy',function(){
									$("#i_account_grant_direct").show();
									$("#i_account_grant_direct").hide();
								});

								$('#i_account_grant').change(function(){
									$("#i_account_grant option:selected").each(function () {
										if($(this).val() == ''){
											$("#i_account_grant_direct").show();
											$("#i_account_grant_direct").val('');
											$("#i_account_grant_direct").attr("disabled",false);
											$("#i_account_grant").hide();
										}else{
											$("#i_account_grant").show();
											$("#i_account_grant_direct").hide();
										}
									});
								});
								</script>
						</div>
					</td>
				</tr>
				<tr>
					<td colspan="2" class="text-left">
						<button class="btn btn-outline-danger btn-sm" onclick="insertBox()" type="submit">입력</button>
						<!--
						<button id="search" class="btn btn-outline-primary btn-sm">검색</button>
						-->
						<input class="btn btn-outline-dark btn-sm" type="button" value="지우기" onClick="insertBox_del()">
					</td>
				</tr>
				</form>
			</table>
		</div>
	</div>

	<!-- 다중 수정란 -->
	<div class="collapse small" id="collapseUpdateMulti" style="1font-size: 12px;">
		<table>
			<td>
				<div class="card card-body mt-2 bg-light callout callout-info">
					<h6>다중 수정란</h6>
					<a>권한 직접입력을 할 경우에는, 반드시 ,를 잘 사용해주세요.
						(예시 : select, insert, update, execute)</a>
					<a class="mb-2">허용 호스트 입력 시, ','를 기재하면 여러대역대 계정을 생성 할 수 있습니다.
						(예시 : 10.11.11.%, 10.11.12.%, 10.11.13.%)</a>

					<table class="table table-sm text-center" style="table-layout: fixed">
						<form class="form-inline" onsubmit="return false;" name="MultiUpdateForm">
							{% csrf_token %}
							<tr class="bg-dark text-white">
								<th style="width: 30%" class="rounded-left">변경 항목</th>
								<th style="width: 62%" class="">변경 값</th>
								<th style="width: 8%" class="rounded-right"></th>
							<tr class="">
								<td>
									<div class="input-group input-group-sm">
										<select class="custom-select" id="mu_account_grant" name="mu_account_grant">
											<option value="" selected>요청자</option>
											<option value="">요청팀</option>
											<option value="">서버</option>
											<option value="">아이디</option>
											<option value="">허용호스트</option>
											<option value="">패스워드</option>
											<option value="">권한</option>
											<option value="">DB</option>
											<option value="">TABLE</option>
											<option value="">용도</option>
											<option value="">URL</option>
										</select>
									</div>
								</td>
								<td><input class="form-control form-control-sm" id="mu_value" name="mu_value" type="text"></td>
								<td>
									<button class="btn btn-outline-info btn-sm" onclick="MultiUpdateBox()" type="submit">수정</button>
								</td>
							</tr>

							<!-- account UpdateMulti ajax script -->
							<script>
								function MultiUpdateBox() {
									alert("다중 수정");
								}
							</script>

						</form>
					</table>
				</div>
			</td>
			<td>
				<div class="card card-body mt-2 bg-light callout callout-dark">
					<h6>다중 삭제란</h6>
					<a>권한 직접입력을 할 경우에는, 반드시 ,를 잘 사용해주세요.
						(예시 : select, insert, update, execute)</a>
					<a class="mb-2">허용 호스트 입력 시, ','를 기재하면 여러대역대 계정을 생성 할 수 있습니다.
						(예시 : 10.11.11.%, 10.11.12.%, 10.11.13.%)</a>

					<table class="table table-sm text-center" style="table-layout: fixed">
						<form class="form-inline" onsubmit="return false;" name="MultiDeleteForm">
							{% csrf_token %}
							<tr class="bg-dark text-white">
								<th style="width: 62%" class="rounded-left">삭제 사유</th>
								<th style="width: 30%" class="">삭제 URL(JIRA)</th>
								<th style="width: 8%" class="rounded-right"></th>
							<tr class="">
								<td><input class="form-control form-control-sm" id="md_value" name="md_value" type="text"></td>
								<td><input class="form-control form-control-sm" id="md_value" name="md_value" type="text"></td>
								<td>
									<button class="btn btn-outline-dark btn-sm" onclick="MultiDeleteBox()" type="submit">삭제</button>
								</td>
							</tr>

							<!-- account DeleteMulti ajax script -->
							<script>
								function MultiDeleteBox() {
									alert("다중 삭제");
								}
							</script>

						</form>
					</table>
				</div>
			</td>
		</table>
	</div>


    <!-- 결과란 -->
	<div>
		{% if page is none %}
			<input id="page" name="page" type="hidden" value="1">
		{% else %}
			<input id="page" name="page" type="hidden" value="{{ page }}">
		{% endif %}

		{% if page_max is none %}
			<input id="page_max" name="page_max" type="hidden" value="1">
		{% else %}
			<input id="page_max" name="page_max" type="hidden" value="{{ page_max }}">
		{% endif %}

		{% if scrollHeight is none %}
			<input id="scrollHeight" name="scrollHeight" type="hidden" value="0">
		{% else %}
			<input id="scrollHeight" name="scrollHeight" type="hidden" value="{{ scrollHeight }}">
		{% endif %}
	</div>

	<div class="board small" id="account_list_ajax" style="font-size: 12px;"></div>



    <!-- Modal -->
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-xl" role="document">
			<div class="modal-content">

				<!-- Modal Header -->
				<div class="modal-header small">
					<!-- <h4 class="modal-title" id="myModalLabel">Modal title</h4> -->

					<!-- Nav tabs -->
					<ul class="nav nav-pills" role="tablist">
						<li>
							<a class="nav-link active btn-outline-dark" href="#updateTab" aria-controls="updateTab" role="tab" aria-selected="true" data-toggle="tab">수정</a>
						</li>
						<li>
							<a class="nav-link btn-outline-dark" href="#deleteTab" aria-controls="deleteTab" role="tab" data-toggle="tab">삭제</a>
						</li>
					</ul>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				</div>

				<!-- Modal Body -->
				<div class="modal-body small">
					<div role="tabpanel">

						<!-- Modal Tab panes -->
						<div class="tab-content">

                            <!-- Modal Delete -->
							<div role="tabpanel" class="tab-pane fade" id="deleteTab">
                                <!--
                                <form class="" action="{% url 'account_delete' %}" method="post" name="deleteForm">
                                -->
								<form class="" onsubmit="return false;" name="deleteForm">
                                {% csrf_token %}

								<!-- hidden value (pk) -->
								<!-- view에 조회 데이터 넘기기 및 페이징 처리 원위치 이동을 위해 구현-->
								<input class="form-control form-control-sm" id="id" name="id" type="hidden">
								<input class="form-control form-control-sm" id="page" name="page" value="{{ page }}" type="hidden">
								<input class="form-control form-control-sm" id="s_account_requestor" name="s_account_requestor" type="hidden">
								<input class="form-control form-control-sm" id="s_account_devteam" name="s_account_devteam" type="hidden">
								<input class="form-control form-control-sm" id="s_account_svr" name="s_account_svr" type="hidden">
								<input class="form-control form-control-sm" id="s_account_user" name="s_account_user" type="hidden">
								<input class="form-control form-control-sm" id="s_account_host" name="s_account_host" type="hidden">
								<input class="form-control form-control-sm" id="s_account_grant" name="s_account_grant" type="hidden">
								<input class="form-control form-control-sm" id="s_account_db" name="s_account_db" type="hidden">
								<input class="form-control form-control-sm" id="s_account_table" name="s_account_table" type="hidden">
								<input class="form-control form-control-sm" id="s_account_url" name="s_account_url" type="hidden">

								<table class="table table-sm table-hover text-center">
								<tr class="">
									<!-- hidden -->
									<input class="form-control form-control-sm" id="page" name="page" type="hidden">
									<input class="form-control form-control-sm" id="scrollHeight" name="scrollHeight" type="hidden">

									<td class="bg-dark text-white align-middle" style="width: 12%">생성일</td>
									<td style="width: 38%"><input class="form-control form-control-sm" id="d_account_create_dt" name="d_account_create_dt" type="text" readonly></td>
									<td class="bg-dark text-white align-middle" style="width: 12%">변경일</td>
									<td style="width: 38%"><input class="form-control form-control-sm" id="d_account_update_dt" name="d_account_update_dt" type="text" readonly></td>
								</tr>
								<tr>
									<td class="bg-dark text-white align-middle">만료일</td>
									<td><input class="form-control form-control-sm" id="d_account_end_dt" name="d_account_end_dt" type="text" readonly></td>
									<td class="bg-dark text-white align-middle">요청자명</td>
									<td><input class="form-control form-control-sm" id="d_account_requestor" name="d_account_requestor" type="text" readonly></td>
								</tr>
								<tr class="">
									<td class="bg-dark text-white align-middle">요청팀</td>
									<td><input class="form-control form-control-sm" id="d_account_devteam" name="d_account_devteam" type="text" readonly></td>
									<td class="bg-dark text-white align-middle">호스트명</td>
									<td><input class="form-control form-control-sm" id="d_account_svr" name="d_account_svr" type="text" readonly></td>
								</tr>
								<tr>
									<td class="bg-dark text-white align-middle">아이디</td>
									<td><input class="form-control form-control-sm" id="d_account_user" name="d_account_user" type="text" readonly></td>
									<td class="bg-dark text-white align-middle">허용호스트</td>
									<td><input class="form-control form-control-sm" id="d_account_host" name="d_account_host" type="text" readonly></td>
								</tr>
								<tr class="">
									<td class="bg-dark text-white align-middle">패스워드</td>
									<td><input class="form-control form-control-sm" id="d_account_pass" name="d_account_pass" type="text" readonly></td>
									<td class="bg-dark text-white align-middle">해쉬</td>
									<td><input class="form-control form-control-sm" id="d_account_hash" name="d_account_hash" type="text" readonly></td>
								</tr>
								<tr>
									<td class="bg-dark text-white align-middle">권한</td>
									<td><input class="form-control form-control-sm" id="d_account_grant" name="d_account_grant" type="text" readonly></td>
									<td class="bg-dark text-white align-middle">grant with</td>
									<td><input class="form-control form-control-sm" id="d_account_grant_with" name="d_account_grant_with" type="text" readonly></td>
								</tr>
								<tr class="">
									<td class="bg-dark text-white align-middle">db</td>
									<td><input class="form-control form-control-sm" id="d_account_db" name="d_account_db" type="text" readonly></td>
									<td class="bg-dark text-white align-middle">table</td>
									<td><input class="form-control form-control-sm" id="d_account_table" name="d_account_table" type="text" readonly></td>
								</tr>
								<tr>
									<td class="bg-dark text-white align-middle">용도</td>
									<td><input class="form-control form-control-sm" id="d_account_info" name="d_account_info" type="text" readonly></td>
									<td class="bg-dark text-white align-middle">URL</td>
									<td><input class="form-control form-control-sm" id="d_account_url" name="d_account_url" type="text" readonly></td>
								</tr>
								<tr class="">
									<td class="bg-dark text-white align-middle">SQL</td>
									<td colspan="3">
										<input class="form-control form-control-sm" id="d_account_sql" name="d_account_sql" type="text" readonly title="클릭 : 클립보드 복사" data-toggle="tooltip" readonly onclick="d_copy_clipboard()">
									</td>
									<!-- 클립보드 복사 -->
									<script>
										function d_copy_clipboard() {
											var copyText = document.getElementById("d_account_sql");
											copyText.select();
											document.execCommand("Copy");
										}

										$(function(){
											$('#d_account_sql').tooltip({
												animation: true,
												container: false,
												delay: {show:50, hide:50},
												html: false,
												selector: false,
												template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
												trigger: 'hover focus',
												viewport: { selector: 'body', padding: 0 },
											});
										});
									</script>
								</tr>
								<tr class="">
									<td class="bg-dark text-white align-middle">삭제 사유</td>
									<td colspan="3">
										<input class="form-control form-control-sm" id="d_account_del_reason" name="d_account_del_reason" type="text">
									</td>
								</tr>
								<tr class="">
									<td class="bg-dark text-white align-middle">삭제 JIRA</td>
									<td colspan="3">
										<input class="form-control form-control-sm" id="d_account_del_note" name="d_account_del_note" type="text">
									</td>
								</tr>
								</table>
								<p class="text-right">삭제 하시겠습니까?</p>

								<div class="modal-footer">
									<button class="btn btn-outline-primary btn-sm" onclick="deleteBox()" type="submit">삭제</button>
                                    <button type="" class="btn btn-sm btn-outline-danger" data-dismiss="modal">취소</button>
								</div>
                                </form>
							</div>

                            <!-- Modal Update-->
							<div role="tabpanel" class="tab-pane active fade show" id="updateTab">
                                <!--
                                <form class="" action="{% url 'account_update' %}" method="post" name="updateForm">
                                -->
								<form class="" onsubmit="return false;" name="updateForm">
                                {% csrf_token %}
								<!-- hidden value (pk) -->
								<!-- view에 조회 데이터 넘기기 및 페이징 처리 원위치 이동을 위해 구현-->
								<input class="form-control form-control-sm" id="id" name="id" type="hidden">
								<input class="form-control form-control-sm" id="page" name="page" value="{{ page }}" type="hidden">
								<input class="form-control form-control-sm" id="s_account_requestor" name="s_account_requestor" type="hidden">
								<input class="form-control form-control-sm" id="s_account_devteam" name="s_account_devteam" type="hidden">
								<input class="form-control form-control-sm" id="s_account_svr" name="s_account_svr" type="hidden">
								<input class="form-control form-control-sm" id="s_account_user" name="s_account_user" type="hidden">
								<input class="form-control form-control-sm" id="s_account_host" name="s_account_host" type="hidden">
								<input class="form-control form-control-sm" id="s_account_grant" name="s_account_grant" type="hidden">
								<input class="form-control form-control-sm" id="s_account_db" name="s_account_db" type="hidden">
								<input class="form-control form-control-sm" id="s_account_table" name="s_account_table" type="hidden">
								<input class="form-control form-control-sm" id="s_account_url" name="s_account_url" type="hidden">

								<table class="table table-sm table-hover text-center">
								<tr class="">
                                    <!-- hidden -->
									<input class="form-control form-control-sm" id="page" name="page" type="hidden">
									<input class="form-control form-control-sm" id="scrollHeight" name="scrollHeight" type="hidden">

									<td class="bg-dark text-white align-middle" style="width: 12%">생성일</td>
									<td style="width: 38%"><input class="form-control form-control-sm" id="u_account_create_dt" name="u_account_create_dt" type="text" readonly></td>
									<td class="bg-dark text-white align-middle" style="width: 12%">변경일</td>
									<td style="width: 38%"><input class="form-control form-control-sm" id="u_account_update_dt" name="u_account_update_dt" type="text" readonly></td>
								</tr>
								<tr>
									<td class="bg-dark text-white align-middle" >만료일</td>
									<td><input class="form-control form-control-sm" id="u_account_end_dt" name="u_account_end_dt" type="text" readonly></td>
									<td class="bg-dark text-white align-middle">요청자명</td>
									<td><input class="form-control form-control-sm" id="u_account_requestor" name="u_account_requestor" type="text"></td>
								</tr>
								<tr class="">
									<td class="bg-dark text-white align-middle">요청팀</td>
									<td><input class="form-control form-control-sm" id="u_account_devteam" name="u_account_devteam" type="text"></td>
									<td class="bg-dark text-white align-middle">호스트명</td>
									<td><input class="form-control form-control-sm" id="u_account_svr" name="u_account_svr" type="text"></td>
								</tr>
								<tr>
									<td class="bg-dark text-white align-middle">아이디</td>
									<td><input class="form-control form-control-sm" id="u_account_user" name="u_account_user" type="text"></td>
									<td class="bg-dark text-white align-middle">허용호스트</td>
									<td><input class="form-control form-control-sm" id="u_account_host" name="u_account_host" type="text"></td>
								</tr>
								<tr class="">
									<td class="bg-dark text-white align-middle">패스워드</td>
									<td><input class="form-control form-control-sm" id="u_account_pass" name="u_account_pass" type="text"></td>
									<td class="bg-dark text-white align-middle">해쉬</td>
									<td><input class="form-control form-control-sm" id="u_account_hash" name="u_account_hash" type="text" readonly></td>
								</tr>
								<tr>
									<td class="bg-dark text-white align-middle">권한</td>
									<td><input class="form-control form-control-sm" id="u_account_grant" name="u_account_grant" type="text"></td>
									<td class="bg-dark text-white align-middle">grant with</td>
									<td><input class="form-control form-control-sm" id="u_account_grant_with" name="u_account_grant_with" type="text"></td>
								</tr>
								<tr class="">
									<td class="bg-dark text-white align-middle">db</td>
									<td><input class="form-control form-control-sm" id="u_account_db" name="u_account_db" type="text"></td>
									<td class="bg-dark text-white align-middle">table</td>
									<td><input class="form-control form-control-sm" id="u_account_table" name="u_account_table" type="text"></td>
								</tr>
								<tr>
									<td class="bg-dark text-white align-middle">용도</td>
									<td><input class="form-control form-control-sm" id="u_account_info" name="u_account_info" type="text"></td>
									<td class="bg-dark text-white align-middle">URL</td>
									<td><input class="form-control form-control-sm" id="u_account_url" name="u_account_url" type="text"></td>
								</tr>
								<tr class="">
									<td class="bg-dark text-white align-middle">SQL</td>
									<td colspan="3">
										<input class="form-control form-control-sm" id="u_account_sql" name="u_account_sql" type="text" data-placement="bottom" title="클릭 : 클립보드 복사" data-toggle="tooltip" readonly onclick="u_copy_clipboard()">
									</td>
									<!-- 클립보드 복사 -->
										<script>
											function u_copy_clipboard() {
												var copyText = document.getElementById("u_account_sql");
												copyText.select();
												document.execCommand("Copy");
											}

											$(function(){
												$('#u_account_sql').tooltip({
													animation: true,
													container: false,
													delay: {show:50, hide:50},
													html: false,
													selector: false,
													template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
													trigger: 'hover focus',
													viewport: { selector: 'body', padding: 0 },
												});
											});
										</script>

								</tr>
								</table>
								<p class="text-right">수정 하시겠습니까?</p>

								<div class="modal-footer">
									<button class="btn btn-outline-primary btn-sm" onclick="updateBox()" type="submit">수정</button>
                                    <button type="" class="btn btn-sm btn-outline-danger" data-dismiss="modal">취소</button>
								</div>
                                </form>
							</div>

						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- loading control -->
	<script>
	$(document).ready(function(){
    	$('#spinners').hide();
	})

	.ajaxStart(function(){
        $('#spinners').fadeIn(10);

	})

	.ajaxStop(function(){
		$('#spinners').fadeOut(10);
	});
	</script>

	<!-- Modal window option script -->
    <script>
    $('#myModal').on('show.bs.modal', function (event) {
        var button = $(event.relatedTarget);
		var id = button.data('id');
		var account_create_dt = button.data('account_create_dt');
		var account_update_dt = button.data('account_update_dt');
		var account_end_dt = button.data('account_end_dt');
		var account_requestor = button.data('account_requestor');
		var account_svr = button.data('account_svr');
		var account_user = button.data('account_user');
		var account_devteam = button.data('account_devteam');
		var account_host = button.data('account_host');
		var account_pass = button.data('account_pass');
		var account_hash = button.data('account_hash');
		var account_grant = button.data('account_grant');
		var account_grant_with = button.data('account_grant_with');
		var account_db = button.data('account_db');
		var account_table = button.data('account_table');
		var account_info = button.data('account_info');
		var account_sql = button.data('account_sql');
		var account_url = button.data('account_url');
		var account_del_yn = button.data('account_del_yn');
		var account_del_dt = button.data('account_del_dt');
		var account_del_reason = button.data('account_del_reason');
		var account_del_note = button.data('account_del_note');

		var s_account_requestor = $("#s_account_requestor").val();
		var s_account_devteam = $("#s_account_devteam").val();
		var s_account_svr = $("#s_account_svr").val();
		var s_account_user = $("#s_account_user").val();
		var s_account_host = $("#s_account_host").val();
		var s_account_grant = $("#s_account_grant").val();
		var s_account_db = $("#s_account_db").val();
		var s_account_table = $("#s_account_table").val();
		var s_account_url = $("#s_account_url").val();

		var page = $("#page").val();
		var scrollHeight = $(window).scrollTop();


        var modal = $('#deleteTab')

		modal.find('#id').val(id);
		modal.find('#d_account_create_dt').val(account_create_dt);
		modal.find('#d_account_update_dt').val(account_update_dt);
		modal.find('#d_account_end_dt').val(account_end_dt);
	    modal.find('#d_account_requestor').val(account_requestor);
		modal.find('#d_account_svr').val(account_svr);
		modal.find('#d_account_user').val(account_user);
		modal.find('#d_account_devteam').val(account_devteam);
		modal.find('#d_account_host').val(account_host);
		modal.find('#d_account_pass').val(account_pass);
		modal.find('#d_account_hash').val(account_hash);
		modal.find('#d_account_grant').val(account_grant);
		modal.find('#d_account_grant_with').val(account_grant_with);
		modal.find('#d_account_db').val(account_db);
		modal.find('#d_account_table').val(account_table);
		modal.find('#d_account_info').val(account_info);
		modal.find('#d_account_sql').val(account_sql);
		modal.find('#d_account_url').val(account_url);
		modal.find('#d_account_del_yn').val(account_del_yn);
		modal.find('#d_account_del_dt').val(account_del_dt);
		modal.find('#d_account_del_reason').val(account_del_reason);
		modal.find('#d_account_del_note').val(account_del_note);
		modal.find('#page').val(page);
		modal.find('#scrollHeight').val(scrollHeight);

		modal.find('#s_account_requestor').val(s_account_requestor);
		modal.find('#s_account_devteam').val(s_account_devteam);
		modal.find('#s_account_svr').val(s_account_svr);
		modal.find('#s_account_user').val(s_account_user);
		modal.find('#s_account_host').val(s_account_host);
		modal.find('#s_account_grant').val(s_account_grant);
		modal.find('#s_account_db').val(s_account_db);
		modal.find('#s_account_table').val(s_account_table);
		modal.find('#s_account_url').val(s_account_url);


        var modal = $('#updateTab')

		modal.find('#id').val(id);
		modal.find('#u_account_create_dt').val(account_create_dt);
		modal.find('#u_account_update_dt').val(account_update_dt);
		modal.find('#u_account_end_dt').val(account_end_dt);
		modal.find('#u_account_requestor').val(account_requestor);
		modal.find('#u_account_svr').val(account_svr);
		modal.find('#u_account_user').val(account_user);
		modal.find('#u_account_devteam').val(account_devteam);
		modal.find('#u_account_host').val(account_host);
		modal.find('#u_account_pass').val(account_pass);
		modal.find('#u_account_hash').val(account_hash);
		modal.find('#u_account_grant').val(account_grant);
		modal.find('#u_account_grant_with').val(account_grant_with);
		modal.find('#u_account_db').val(account_db);
		modal.find('#u_account_table').val(account_table);
		modal.find('#u_account_info').val(account_info);
		modal.find('#u_account_sql').val(account_sql);
		modal.find('#u_account_url').val(account_url);
		modal.find('#u_account_del_yn').val(account_del_yn);
		modal.find('#u_account_del_dt').val(account_del_dt);
		modal.find('#u_account_del_reason').val(account_del_reason);
		modal.find('#u_account_del_note').val(account_del_note);
		modal.find('#page').val(page);
		modal.find('#scrollHeight').val(scrollHeight);

		modal.find('#s_account_requestor').val(s_account_requestor);
		modal.find('#s_account_devteam').val(s_account_devteam);
		modal.find('#s_account_svr').val(s_account_svr);
		modal.find('#s_account_user').val(s_account_user);
		modal.find('#s_account_host').val(s_account_host);
		modal.find('#s_account_grant').val(s_account_grant);
		modal.find('#s_account_db').val(s_account_db);
		modal.find('#s_account_table').val(s_account_table);
		modal.find('#s_account_url').val(s_account_url);
    })
    </script>

	<!-- account insert ajax script -->
	<script>
	function insertBox() {
		var retVal = confirm("입력하시겠습니까?");
		if (retVal == true ){
			var page = parseInt($("#page").val());
			insert_callMoreListAjax(page);
			$("#page").val(parseInt(page));
		}else{
			return false;
		}
	}

	function insertBox_del() {
		document.insertForm.reset();
	}

	function insert_callMoreListAjax(page) {
		var i_account_requestor = $("#i_account_requestor").val();
		var i_account_devteam = $("#i_account_devteam").val();
		var i_account_info = $("#i_account_info").val();
		var i_account_url = $("#i_account_url").val();
		var i_account_svr = $("#i_account_svr").val();
		var i_account_user = $("#i_account_user").val();
		var i_account_host = $("#i_account_host").val();
		var i_account_pass = $("#i_account_pass").val();
		var i_account_db = $("#i_account_db").val();
		var i_account_table = $("#i_account_table").val();
		var i_account_grant = $("#i_account_grant").val();
		var i_account_grant_direct = $("#i_account_grant_direct").val();

		var s_account_requestor = $("#s_account_requestor").val();
		var s_account_devteam = $("#s_account_devteam").val();
		var s_account_svr = $("#s_account_svr").val();
		var s_account_user = $("#s_account_user").val();
		var s_account_host = $("#s_account_host").val();
		var s_account_grant = $("#s_account_grant").val();
		var s_account_db = $("#s_account_db").val();
		var s_account_table = $("#s_account_table").val();
		var s_account_url = $("#s_account_url").val();

		$.ajax( {
			type : 'POST',
			url: "{% url 'account_insert' %}",
			data: {
				'i_account_requestor': i_account_requestor,
				'i_account_devteam': i_account_devteam,
				'i_account_info': i_account_info,
				'i_account_url': i_account_url,
				'i_account_svr': i_account_svr,
				'i_account_user': i_account_user,
				'i_account_host': i_account_host,
				'i_account_pass': i_account_pass,
				'i_account_db': i_account_db,
				'i_account_table': i_account_table,
				'i_account_grant': i_account_grant,
				'i_account_grant_direct': i_account_grant_direct,
				's_account_requestor': s_account_requestor,
				's_account_devteam': s_account_devteam,
				's_account_svr': s_account_svr,
				's_account_user': s_account_user,
				's_account_host': s_account_host,
				's_account_grant': s_account_grant,
				's_account_db': s_account_db,
				's_account_table': s_account_table,
				's_account_url': s_account_url,
				'page': page,
				'csrfmiddlewaretoken': token,
			},
			success: addMoreAccountAjax,
			dataType: 'html'
		});
	}

	</script>

	<!-- account delete ajax script -->
	<script>
		function deleteBox() {
			var page = parseInt($("#page").val());
			delete_callMoreListAjax(page);
			$("#page").val(parseInt(page));
			$('#myModal').modal("hide");
		}

		function delete_callMoreListAjax(page) {
			var d_id = $("#id").val();
			var d_account_requestor = $("#d_account_requestor").val();
			var d_account_svr = $("#d_account_svr").val();
			var d_account_user = $("#d_account_user").val();
			var d_account_devteam = $("#d_account_devteam").val();
			var d_account_host = $("#d_account_host").val();
			var d_account_pass = $("#d_account_pass").val();
			var d_account_grant = $("#d_account_grant").val();
			var d_account_grant_with = $("#d_account_grant_with").val();
			var d_account_db = $("#d_account_db").val();
			var d_account_table = $("#d_account_table").val();
			var d_account_info = $("#d_account_info").val();
			var d_account_url = $("#d_account_url").val();
			var d_account_del_reason = $("#d_account_del_reason").val();
			var d_account_del_note = $("#d_account_del_note").val();

			var s_account_requestor = $("#s_account_requestor").val();
			var s_account_devteam = $("#s_account_devteam").val();
			var s_account_svr = $("#s_account_svr").val();
			var s_account_user = $("#s_account_user").val();
			var s_account_host = $("#s_account_host").val();
			var s_account_grant = $("#s_account_grant").val();
			var s_account_db = $("#s_account_db").val();
			var s_account_table = $("#s_account_table").val();
			var s_account_url = $("#s_account_url").val();

			$.ajax( {
				type : 'POST',
				url: "{% url 'account_delete' %}",
				data: {
					'd_id': d_id,
					'd_account_requestor': d_account_requestor,
					'd_account_svr': d_account_svr,
					'd_account_user': d_account_user,
					'd_account_devteam': d_account_devteam,
					'd_account_host': d_account_host,
					'd_account_pass': d_account_pass,
					'd_account_grant': d_account_grant,
					'd_account_grant_with': d_account_grant_with,
					'd_account_db': d_account_db,
					'd_account_table': d_account_table,
					'd_account_info': d_account_info,
					'd_account_url': d_account_url,
					'd_account_del_reason': d_account_del_reason,
					'd_account_del_note': d_account_del_note,
					's_account_requestor': s_account_requestor,
					's_account_devteam': s_account_devteam,
					's_account_svr': s_account_svr,
					's_account_user': s_account_user,
					's_account_host': s_account_host,
					's_account_grant': s_account_grant,
					's_account_db': s_account_db,
					's_account_table': s_account_table,
					's_account_url': s_account_url,
					'page': page,
					'csrfmiddlewaretoken': token,
				},
				success: addMoreAccountAjax,
				dataType: 'html'
			});
		}
	</script>

	<!-- account update ajax script -->
	<script>
		function updateBox() {
			var page = parseInt($("#page").val());
			update_callMoreListAjax(page);
			$("#page").val(parseInt(page));
			$('#myModal').modal("hide");
		}

		function update_callMoreListAjax(page) {
			var u_id = $("#id").val();
			var u_account_requestor = $("#u_account_requestor").val();
			var u_account_svr = $("#u_account_svr").val();
			var u_account_user = $("#u_account_user").val();
			var u_account_devteam = $("#u_account_devteam").val();
			var u_account_host = $("#u_account_host").val();
			var u_account_pass = $("#u_account_pass").val();
			var u_account_grant = $("#u_account_grant").val();
			var u_account_grant_with = $("#u_account_grant_with").val();
			var u_account_db = $("#u_account_db").val();
			var u_account_table = $("#u_account_table").val();
			var u_account_info = $("#u_account_info").val();
			var u_account_url = $("#u_account_url").val();

			var s_account_requestor = $("#s_account_requestor").val();
			var s_account_devteam = $("#s_account_devteam").val();
			var s_account_svr = $("#s_account_svr").val();
			var s_account_user = $("#s_account_user").val();
			var s_account_host = $("#s_account_host").val();
			var s_account_grant = $("#s_account_grant").val();
			var s_account_db = $("#s_account_db").val();
			var s_account_table = $("#s_account_table").val();
			var s_account_url = $("#s_account_url").val();

			$.ajax( {
				type : 'POST',
				url: "{% url 'account_update' %}",
				data: {
					'u_id': u_id,
					'u_account_requestor': u_account_requestor,
					'u_account_svr': u_account_svr,
					'u_account_user': u_account_user,
					'u_account_devteam': u_account_devteam,
					'u_account_host': u_account_host,
					'u_account_pass': u_account_pass,
					'u_account_grant': u_account_grant,
					'u_account_grant_with': u_account_grant_with,
					'u_account_db': u_account_db,
					'u_account_table': u_account_table,
					'u_account_info': u_account_info,
					'u_account_url': u_account_url,
					's_account_requestor': s_account_requestor,
					's_account_devteam': s_account_devteam,
					's_account_svr': s_account_svr,
					's_account_user': s_account_user,
					's_account_host': s_account_host,
					's_account_grant': s_account_grant,
					's_account_db': s_account_db,
					's_account_table': s_account_table,
					's_account_url': s_account_url,
					'page': page,
					'csrfmiddlewaretoken': token,
				},
				success: addMoreAccountAjax,
				dataType: 'html'
			});
		}
	</script>

	<!-- account select ajax script -->
	<script>
		var token = $('input[name="csrfmiddlewaretoken"]').prop('value');

		$('#search').click(function(){
			//var page = parseInt($("#page").val());
			// 검색 버튼을 누를 경우엔, page 1로 초기화
			var page = 1
			callMoreListAjax(page);
			$("#page").val(parseInt(page));
		});

        $('#account_list_ajax').load('dummy',function(){
            var page = $("#page").val();
            var scrollHeight = $("#scrollHeight").val();

            callMoreListAjax(page);
            $("#page").val(parseInt(page));
            $('html').animate({scrollTop: scrollHeight}, 800);
        });

		$(window).scroll(function(){
			var scrollHeight = $(window).scrollTop() + $(window).height();
			var documentHeight = $(document).height();

			if (scrollHeight + 500 >= documentHeight){
				var page = $("#page").val();
				if (page <= 20){
					callMoreListAjax(page);
					$("#page").val(parseInt(page)+1);
				}
			}
		});

		function callMoreListAjax(page) {
			var s_account_requestor = $("#s_account_requestor").val();
			var s_account_devteam = $("#s_account_devteam").val();
			var s_account_svr = $("#s_account_svr").val();
			var s_account_user = $("#s_account_user").val();
			var s_account_host = $("#s_account_host").val();
			var s_account_grant = $("#s_account_grant").val();
			var s_account_db = $("#s_account_db").val();
			var s_account_table = $("#s_account_table").val();
			var s_account_url = $("#s_account_url").val();

			$.ajax( {
				type : 'POST',
				url: "{% url 'account_select' %}",
				data: {
					's_account_requestor': s_account_requestor,
					's_account_devteam': s_account_devteam,
					's_account_svr': s_account_svr,
					's_account_user': s_account_user,
					's_account_host': s_account_host,
					's_account_grant': s_account_grant,
					's_account_db': s_account_db,
					's_account_table': s_account_table,
					's_account_url': s_account_url,
					'page': page,
					'csrfmiddlewaretoken': token,
				},
				success: addMoreAccountAjax,
				dataType: 'html'
			});
		}
	</script>

	<!-- common ajax script -->
    <script>
		function addMoreAccountAjax(data, textStatus, jqXHR) {
			$('#account_list_ajax').html(data);
		}
	</script>

    {% endblock %}
</body>
</html>
